<div id="idle_container" class="extension-container">
    <details>
        <summary><b>Idle Settings</b></summary>

        <!-- 全局设定 -->
        <fieldset>
            <legend>General Settings</legend>
            <label>
                <input type="checkbox" id="idle_enabled">
                Enable Idle
            </label>

            <div>
                <label>
                    <input type="checkbox" id="idle_use_continuation">
                    Use Continuation
                </label>
                <label>
                    <input type="checkbox" id="idle_use_regenerate">
                    Use Regenerate
                </label>
                <label>
                    <input type="checkbox" id="idle_use_impersonation">
                    Use Impersonation
                </label>
                <label>
                    <input type="checkbox" id="idle_use_swipe">
                    Use Swipe
                </label>
            </div>

            <div>
                <label for="idle_sendAs">Send As:</label>
                <select id="idle_sendAs">
                    <option value="user">User</option>
                    <option value="char">Character</option>
                    <option value="sys">System</option>
                    <option value="raw">Raw</option>
                </select>
            </div>

            <div>
                <label>
                    <input type="checkbox" id="idle_random_time">
                    Use Random Time
                </label>
            </div>

            <!-- 移动上来的全局设定 -->
            <div>
                <label>
                    <input type="checkbox" id="idle_include_prompt">
                    Include Prompt in Message
                </label>
            </div>

            <!-- 新增显示下一次回复时间 -->
            <div class="idle-next-time">
                Next reply scheduled: <span id="idle_next_time">--</span>
            </div>
        </fieldset>

        <!-- 局部功能 -->
        <fieldset>
            <legend>Idle Behaviors</legend>

            <!-- ✅ 新增局部开关 -->
            <div>
                <label>
                    <input type="checkbox" id="idle_use_timer">
                    Enable Idle Reply
                </label>
            </div>

            <div>
                <label for="idle_timer">Idle Timer (seconds):</label>
                <input type="number" id="idle_timer" min="1">
            </div>

            <div>
                <label for="idle_timer_min">Idle Timer Minimum (when random):</label>
                <input type="number" id="idle_timer_min" min="1">
            </div>

            <div>
                <label for="idle_repeats">Repeats (0 = infinite):</label>
                <input type="number" id="idle_repeats" min="0">
            </div>

            <div>
                <label for="idle_prompts">Prompts (one per line):</label>
                <textarea id="idle_prompts" rows="5"></textarea>
            </div>

            <!-- 一次性定时 -->
            <fieldset>
                <legend>One-Time Schedules</legend>
                <div id="idle_schedule_once_list"></div>
                <button type="button" id="idle_add_schedule_once">+ Add One-Time Schedule</button>
            </fieldset>

            <!-- 每日定时 -->
            <fieldset>
                <legend>Daily Schedules</legend>
                <div id="idle_schedule_daily_list"></div>
                <button type="button" id="idle_add_schedule_daily">+ Add Daily Schedule</button>
            </fieldset>
        </fieldset>

    </details>
</div>